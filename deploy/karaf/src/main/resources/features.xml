<?xml version='1.0' encoding='UTF-8'?>
<features name='switchyard-${project.version}'>

    <repository>mvn:org.apache.camel.karaf/apache-camel/${version.camel}/xml/features</repository>
    <repository>mvn:org.ops4j.pax.cdi/pax-cdi-features/0.4.0/xml/features</repository>
    <repository>mvn:org.apache.cxf.karaf/apache-cxf/${version.cxf}/xml/features</repository>

    <feature name="switchyard" version="${project.version}" resolver="(obr)">
        <feature>eventadmin</feature>
        <feature version="${version.camel}">camel-core</feature>
        <bundle dependency='true'>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.xmlresolver/1.2_5</bundle>
        <bundle>mvn:org.switchyard/switchyard-api/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-common/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-security/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-config/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-serial/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-common-camel/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-runtime/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-extensions-wsdl/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-bus-camel/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-transform/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-validate/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-admin/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-deploy/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-deploy-osgi/${project.version}</bundle>
        <bundle>mvn:org.switchyard/switchyard-deploy-karaf/${project.version}</bundle>
    </feature>

    <feature name="switchyard-bean" version="${project.version}" resolver="(obr)">
        <feature version="${project.version}">switchyard-bean-xbean-hack</feature>
        <feature version="${project.version}">switchyard</feature>
        <feature version="0.4.0">pax-cdi-weld</feature>
        <bundle dependency="true">mvn:org.apache.deltaspike.core/deltaspike-core-api/0.4</bundle>
        <bundle>mvn:org.apache.camel/camel-cdi/${version.camel}</bundle>
        <bundle>mvn:org.switchyard/switchyard-common-cdi/${project.version}</bundle>
        <bundle>mvn:org.switchyard.components/switchyard-component-bean/${project.version}</bundle>
    </feature>
    <feature name="switchyard-bean-xbean-hack" version="${project.version}" resolver="(obr)">
        <bundle>mvn:org.apache.xbean/xbean-bundleutils/3.12</bundle>
    </feature>

    <feature name="switchyard-soap" version="${project.version}" resolver="(obr)">
        <feature version="${project.version}">switchyard</feature>
        <feature version="${version.cxf}">cxf-jaxws</feature>
        <feature version="${version.cxf}">cxf-http</feature>
        <feature version="[7,9)">jetty</feature>
        <!-- the cxf-http-jetty feature is a bit broken and can install a different version of cxf-rt-transports-http-jetty -->
        <bundle>mvn:org.apache.cxf/cxf-rt-transports-http-jetty/${version.cxf}</bundle>
        <bundle dependency="true">mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.wsdl4j/1.6.2_6</bundle>
        <bundle>mvn:org.switchyard.components/switchyard-component-common/${project.version}</bundle>
        <bundle>mvn:org.switchyard.components/switchyard-component-soap/${project.version}</bundle>
    </feature>

    <feature name="switchyard-quickstart-bean-service" version="${project.version}" resolver="(obr)">
        <feature version="${project.version}">switchyard-bean</feature>
        <feature version="${project.version}">switchyard-soap</feature>
        <bundle>mvn:org.switchyard.quickstarts/switchyard-quickstart-bean-service/${project.version}</bundle>
    </feature>

</features>
